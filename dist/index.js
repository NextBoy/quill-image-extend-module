!function(e){function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}var t={};i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="/dist/",i(i.s=2)}([function(e,i,t){"use strict";t.d(i,"a",function(){return r});var n=t(1),r={watcher:{},active:null,on:function(e,i){this.watcher[e]||(this.watcher[e]=i)},emit:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.active=this.watcher[e],1===i&&Object(n.a)()}}},function(e,i,t){"use strict";function n(){var e=document.querySelector(".quill-image-input");null===e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.classList.add("quill-image-input"),e.style.display="none",e.addEventListener("change",function(){var i=r.a.active;if(i.file=e.files[0],e.value="",i.config.size&&i.file.size>=1024*i.config.size*1024)return void(i.config.sizeError&&i.config.sizeError());i.config.action?i.uploadImg():i.toBase64()}),document.body.appendChild(e)),e.click()}i.a=n;var r=t(0)},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t(0);t.d(i,"QuillWatch",function(){return n.a});var r=t(3);t.d(i,"ImageExtend",function(){return r.a});var a=t(1);t.d(i,"imgHandler",function(){return a.a});var o=t(4);t.d(i,"container",function(){return o.a})},function(e,i,t){"use strict";function n(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}t.d(i,"a",function(){return o});var r=t(0),a=function(){function e(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),o=function(){function e(i){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this.id=Math.random(),this.quill=i,this.quill.id=this.id,this.config=t,this.file="",this.imgURL="",i.root.addEventListener("paste",this.pasteHandle.bind(this),!1),i.root.addEventListener("drop",this.dropHandle.bind(this),!1),i.root.addEventListener("dropover",function(e){e.preventDefault()},!1),this.cursorIndex=0,r.a.on(this.id,this)}return a(e,[{key:"pasteHandle",value:function(e){r.a.emit(this.quill.id,0);var i=e.clipboardData,t=0,n=void 0,a=void 0,o=void 0;if(i){if(!(n=i.items))return;for(a=n[0],o=i.types||[];t<o.length;t++)if("Files"===o[t]){a=n[t];break}if(a&&"file"===a.kind&&a.type.match(/^image\//i)){this.file=a.getAsFile();var u=this;if(u.config.size&&u.file.size>=1024*u.config.size*1024)return void(u.config.sizeError&&u.config.sizeError());this.config.action}}}},{key:"dropHandle",value:function(e){r.a.emit(this.quill.id,0);var i=this;if(e.preventDefault(),i.config.size&&i.file.size>=1024*i.config.size*1024)return void(i.config.sizeError&&i.config.sizeError());i.file=e.dataTransfer.files[0],this.config.action?i.uploadImg():i.toBase64()}},{key:"toBase64",value:function(){var e=this,i=new FileReader;i.onload=function(i){e.imgURL=i.target.result,e.insertImg()},i.readAsDataURL(e.file)}},{key:"uploadImg",value:function(){var e=this,i=(e.quillLoading,e.config),t=new FormData;t.append(i.name,e.file),i.editForm&&i.editForm(t);var n=new XMLHttpRequest;n.open("post",i.action,!0),i.headers&&i.headers(n),i.change&&i.change(n,t),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var t=JSON.parse(n.responseText);e.imgURL=i.response(t),r.a.active.uploadSuccess(),e.insertImg(),e.config.success&&e.config.success()}else e.config.error&&e.config.error(),r.a.active.uploadError()},n.upload.onloadstart=function(e){r.a.active.uploading(),i.start&&i.start()},n.upload.onprogress=function(e){var i=(e.loaded/e.total*100|0)+"%";r.a.active.progress(i)},n.upload.onerror=function(e){r.a.active.uploadError(),i.error&&i.error()},n.upload.onloadend=function(e){i.end&&i.end()},n.send(t)}},{key:"insertImg",value:function(){var e=r.a.active;e.quill.insertEmbed(r.a.active.cursorIndex,"image",e.imgURL),e.quill.update(),e.quill.setSelection(e.cursorIndex+1)}},{key:"progress",value:function(e){e="[uploading"+e+"]",r.a.active.quill.root.innerHTML=r.a.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,e)}},{key:"uploading",value:function(){var e=(r.a.active.quill.getSelection()||{}).index||r.a.active.quill.getLength();r.a.active.cursorIndex=e,r.a.active.quill.insertText(r.a.active.cursorIndex,"[uploading...]",{color:"red"},!0)}},{key:"uploadError",value:function(){r.a.active.quill.root.innerHTML=r.a.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"[upload error]")}},{key:"uploadSuccess",value:function(){r.a.active.quill.root.innerHTML=r.a.active.quill.root.innerHTML.replace(/\[uploading.*?\]/,"")}}]),e}()},function(e,i,t){"use strict";t.d(i,"a",function(){return n});var n=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}]);
//# sourceMappingURL=index.js.map